/* Manual theme system - fallback if Tailwind dark mode fails */

/* Light theme (default) */
:root {
  --bg-primary: #f9fafb;
  --bg-secondary: #ffffff;
  --bg-tertiary: #f3f4f6;
  --text-primary: #111827;
  --text-secondary: #6b7280;
  --border-primary: #e5e7eb;
  --border-secondary: #d1d5db;
}

/* Dark theme */
html.dark {
  --bg-primary: #111827;
  --bg-secondary: #1f2937;
  --bg-tertiary: #374151;
  --text-primary: #f9fafb;
  --text-secondary: #9ca3af;
  --border-primary: #374151;
  --border-secondary: #4b5563;
}

/* Theme Creator override - if custom theme variables are set, use them */
:root {
  /* Override with Theme Creator variables if they exist */
  --bg-primary: var(--theme-bg-primary, #f9fafb);
  --bg-secondary: var(--theme-bg-secondary, #ffffff);
  --bg-tertiary: var(--theme-bg-tertiary, #f3f4f6);
  --bg-hover: var(--theme-bg-hover, #f3f4f6);
  --text-primary: var(--theme-text-primary, #111827);
  --text-secondary: var(--theme-text-secondary, #6b7280);
  --text-muted: var(--theme-text-muted, #9ca3af);
  --border-primary: var(--theme-border-primary, #e5e7eb);
  --border-secondary: var(--theme-border-secondary, #d1d5db);
  --accent-primary: var(--theme-accent-primary, #3b82f6);
  --accent-secondary: var(--theme-accent-secondary, #8b5cf6);
  --accent-bg: var(--theme-accent-bg, rgba(59, 130, 246, 0.1));
  --accent-border: var(--theme-accent-border, #bfdbfe);
  --link-color: var(--theme-link-color, #3b82f6);
  --success-color: var(--theme-success-color, #10b981);
  --warning-color: var(--theme-warning-color, #f59e0b);
  --error-color: var(--theme-error-color, #ef4444);

  /* Syntax highlighting colors */
  --syntax-keyword: var(--theme-syntax-keyword, #0000ff);
  --syntax-string: var(--theme-syntax-string, #a31515);
  --syntax-comment: var(--theme-syntax-comment, #008000);
  --syntax-number: var(--theme-syntax-number, #098658);
  --syntax-function: var(--theme-syntax-function, #795e26);
  --syntax-variable: var(--theme-syntax-variable, #001080);
}

html.dark {
  /* Override with Theme Creator variables if they exist */
  --bg-primary: var(--theme-bg-primary, #111827);
  --bg-secondary: var(--theme-bg-secondary, #1f2937);
  --bg-tertiary: var(--theme-bg-tertiary, #374151);
  --bg-hover: var(--theme-bg-hover, #374151);
  --text-primary: var(--theme-text-primary, #f9fafb);
  --text-secondary: var(--theme-text-secondary, #9ca3af);
  --text-muted: var(--theme-text-muted, #6b7280);
  --border-primary: var(--theme-border-primary, #374151);
  --border-secondary: var(--theme-border-secondary, #4b5563);
  --accent-primary: var(--theme-accent-primary, #3b82f6);
  --accent-secondary: var(--theme-accent-secondary, #8b5cf6);
  --accent-bg: var(--theme-accent-bg, rgba(59, 130, 246, 0.1));
  --accent-border: var(--theme-accent-border, #1e40af);
  --link-color: var(--theme-link-color, #60a5fa);
  --success-color: var(--theme-success-color, #34d399);
  --warning-color: var(--theme-warning-color, #fbbf24);
  --error-color: var(--theme-error-color, #f87171);

  /* Syntax highlighting colors for dark mode */
  --syntax-keyword: var(--theme-syntax-keyword, #569cd6);
  --syntax-string: var(--theme-syntax-string, #ce9178);
  --syntax-comment: var(--theme-syntax-comment, #6a9955);
  --syntax-number: var(--theme-syntax-number, #b5cea8);
  --syntax-function: var(--theme-syntax-function, #dcdcaa);
  --syntax-variable: var(--theme-syntax-variable, #9cdcfe);
}

/* Force main backgrounds to use theme colors */
html.dark body {
  background-color: var(--bg-primary) !important;
  color: var(--text-primary) !important;
}

html.dark .main-bg {
  background-color: var(--bg-primary) !important;
}

html.dark .secondary-bg {
  background-color: var(--bg-secondary) !important;
}

html.dark .tertiary-bg {
  background-color: var(--bg-tertiary) !important;
}

html.dark .primary-text {
  color: var(--text-primary) !important;
}

html.dark .secondary-text {
  color: var(--text-secondary) !important;
}

html.dark .primary-border {
  border-color: var(--border-primary) !important;
}

/* Ensure Tailwind dark mode classes work with higher specificity */
html.dark .dark\:bg-gray-900 {
  background-color: var(--bg-primary) !important;
}

html.dark .dark\:bg-gray-800 {
  background-color: var(--bg-secondary) !important;
}

html.dark .dark\:bg-gray-700 {
  background-color: var(--bg-tertiary) !important;
}

html.dark .dark\:text-white {
  color: var(--text-primary) !important;
}

html.dark .dark\:text-gray-300 {
  color: var(--text-primary) !important;
}

html.dark .dark\:text-gray-400 {
  color: var(--text-secondary) !important;
}

html.dark .dark\:border-gray-700 {
  border-color: var(--border-primary) !important;
}

html.dark .dark\:border-gray-600 {
  border-color: var(--border-secondary) !important;
}

/* Force form elements to respect theme */
html.dark input[type='text'],
html.dark input[type='email'],
html.dark input[type='password'],
html.dark textarea {
  background-color: var(--bg-tertiary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-secondary) !important;
}

html.dark input[type='text']::placeholder,
html.dark input[type='email']::placeholder,
html.dark input[type='password']::placeholder,
html.dark textarea::placeholder {
  color: var(--text-secondary) !important;
}

html:not(.dark) input[type='text'],
html:not(.dark) input[type='email'],
html:not(.dark) input[type='password'],
html:not(.dark) textarea {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-secondary) !important;
}

html:not(.dark) input[type='text']::placeholder,
html:not(.dark) input[type='email']::placeholder,
html:not(.dark) input[type='password']::placeholder,
html:not(.dark) textarea::placeholder {
  color: var(--text-secondary) !important;
}

/* Specific targeting for file items */
html.dark .bg-gray-50 {
  background-color: #374151 !important;
}

html.dark .text-gray-500 {
  color: #9ca3af !important;
}

html.dark .border-gray-200 {
  border-color: #374151 !important;
}

/* Apply theme variables */
.theme-bg-primary {
  background-color: var(--bg-primary);
}

.theme-bg-secondary {
  background-color: var(--bg-secondary);
}

.theme-bg-tertiary {
  background-color: var(--bg-tertiary);
}

.theme-text-primary {
  color: var(--text-primary);
}

.theme-text-secondary {
  color: var(--text-secondary);
}

.theme-border-primary {
  border-color: var(--border-primary);
}

.theme-border-secondary {
  border-color: var(--border-secondary);
}

/* Force theme application with higher specificity */
html.dark .theme-force-dark {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-primary) !important;
}

html.light .theme-force-light,
html:not(.dark) .theme-force-light {
  background-color: var(--bg-secondary) !important;
  color: var(--text-primary) !important;
  border-color: var(--border-primary) !important;
}

/* Force markdown headers, lists, and paragraphs to use theme-appropriate colors */
/* Light mode - dark text */
html.light .prose h1,
html.light .prose h2,
html.light .prose h3,
html.light .prose h4,
html.light .prose ul,
html.light .prose ol,
html.light .prose li,
html.light .prose p,
html:not(.dark) .prose h1,
html:not(.dark) .prose h2,
html:not(.dark) .prose h3,
html:not(.dark) .prose h4,
html:not(.dark) .prose ul,
html:not(.dark) .prose ol,
html:not(.dark) .prose li,
html:not(.dark) .prose p {
  color: var(--text-primary) !important;
}

/* Dark mode - light text */
html.dark .prose h1,
html.dark .prose h2,
html.dark .prose h3,
html.dark .prose h4,
html.dark .prose ul,
html.dark .prose ol,
html.dark .prose li,
html.dark .prose p {
  color: var(--text-primary) !important;
}

/* Additional prose elements with theme support */
.prose strong,
.prose b {
  color: var(--text-primary) !important;
}

.prose em,
.prose i {
  color: var(--text-primary) !important;
}

.prose code {
  color: var(--text-primary) !important;
  background-color: var(--bg-tertiary) !important;
}

.prose pre {
  background-color: var(--bg-tertiary) !important;
}

.prose pre code {
  color: var(--text-primary) !important;
}

.prose blockquote {
  color: var(--text-secondary) !important;
  border-left-color: var(--border-primary) !important;
}

.prose a {
  color: var(--link-color) !important;
}

.prose a:hover {
  opacity: 0.8;
}

.prose table {
  color: var(--text-primary) !important;
}

.prose thead {
  color: var(--text-primary) !important;
  border-bottom-color: var(--border-primary) !important;
}

.prose tbody tr {
  border-bottom-color: var(--border-secondary) !important;
}

/* Theme support for links */
a,
.link {
  color: var(--link-color, #3b82f6);
}

a:hover,
.link:hover {
  color: var(--theme-link-hover, var(--link-color, #3b82f6));
  opacity: 0.8;
}

/* Theme support for buttons with accent colors */
.btn-primary,
button.primary {
  background-color: var(--theme-button-bg, var(--accent-primary, #3b82f6));
  color: var(--theme-button-text, white);
}

.btn-primary:hover,
button.primary:hover {
  background-color: var(--theme-button-hover, var(--accent-primary, #3b82f6));
  opacity: 0.9;
}

/* Status colors */
.text-success {
  color: var(--success-color, #10b981);
}

.text-warning {
  color: var(--warning-color, #f59e0b);
}

.text-error {
  color: var(--error-color, #ef4444);
}

.bg-success {
  background-color: var(--success-color, #10b981);
}

.bg-warning {
  background-color: var(--warning-color, #f59e0b);
}

.bg-error {
  background-color: var(--error-color, #ef4444);
}

/* Sidebar and toolbar theming */
.sidebar {
  background-color: var(--theme-sidebar-bg, var(--bg-secondary));
  color: var(--theme-sidebar-text, var(--text-primary));
}

.toolbar {
  background-color: var(--theme-toolbar-bg, var(--bg-secondary));
  color: var(--theme-toolbar-text, var(--text-primary));
}
